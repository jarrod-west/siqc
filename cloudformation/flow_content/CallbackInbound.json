{
  "Version": "2019-10-30",
  "StartAction": "876b939e-3ad2-4a98-9de5-eae4b60bdc70",
  "Metadata": {
    "entryPointPosition": {
      "x": 100.8,
      "y": 40
    },
    "ActionMetadata": {
      "4e3883d1-15db-4e15-a28a-1d14d2b9b472": {
        "position": {
          "x": 891.2,
          "y": 26.4
        },
        "parameters": {
          "QueueId": {
            "displayName": "Callback Queue"
          }
        },
        "queue": {
          "id": "{{resources['CallbackQueue']}}",
          "text": "Callback Queue"
        }
      },
      "3a536af3-125d-48f1-acab-d4e8c9dc52fd": {
        "position": {
          "x": 1132.8,
          "y": 52.8
        }
      },
      "876b939e-3ad2-4a98-9de5-eae4b60bdc70": {
        "position": {
          "x": 195.2,
          "y": 21.6
        }
      },
      "441de2d2-8162-4c7a-81ff-f38f26dc9815": {
        "position": {
          "x": 655.2,
          "y": 24
        }
      },
      "7071827e-0039-4545-ae30-5a1bf5cb612f": {
        "position": {
          "x": 420.8,
          "y": 22.4
        },
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "CallbackLambda"
          }
        },
        "dynamicMetadata": {
          "LambdaOperation": false
        }
      }
    },
    "Annotations": []
  },
  "Actions": [
    {
      "Parameters": {
        "RetryDelaySeconds": "600",
        "InitialCallDelaySeconds": "5",
        "MaximumConnectionAttempts": "0",
        "QueueId": "{{resources['CallbackQueue']}}"
      },
      "Identifier": "4e3883d1-15db-4e15-a28a-1d14d2b9b472",
      "Type": "CreateCallbackContact",
      "Transitions": {
        "NextAction": "3a536af3-125d-48f1-acab-d4e8c9dc52fd",
        "Errors": [
          {
            "NextAction": "3a536af3-125d-48f1-acab-d4e8c9dc52fd",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "3a536af3-125d-48f1-acab-d4e8c9dc52fd",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "876b939e-3ad2-4a98-9de5-eae4b60bdc70",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "7071827e-0039-4545-ae30-5a1bf5cb612f"
      }
    },
    {
      "Parameters": {
        "CallbackNumber": "$.Attributes.CallbackNumber"
      },
      "Identifier": "441de2d2-8162-4c7a-81ff-f38f26dc9815",
      "Type": "UpdateContactCallbackNumber",
      "Transitions": {
        "NextAction": "4e3883d1-15db-4e15-a28a-1d14d2b9b472",
        "Errors": [
          {
            "NextAction": "3a536af3-125d-48f1-acab-d4e8c9dc52fd",
            "ErrorType": "InvalidCallbackNumber"
          },
          {
            "NextAction": "3a536af3-125d-48f1-acab-d4e8c9dc52fd",
            "ErrorType": "CallbackNumberNotDialable"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "arn:aws:lambda:ap-southeast-2:662576704376:function:CallbackLambda",
        "InvocationTimeLimitSeconds": "8",
        "LambdaInvocationAttributes": {
          "LambdaOperation": "pop"
        },
        "ResponseValidation": {
          "ResponseType": "STRING_MAP"
        }
      },
      "Identifier": "7071827e-0039-4545-ae30-5a1bf5cb612f",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "441de2d2-8162-4c7a-81ff-f38f26dc9815",
        "Errors": [
          {
            "NextAction": "3a536af3-125d-48f1-acab-d4e8c9dc52fd",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}